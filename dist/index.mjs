var g={align:"middle",debug:!1,direction:"left",gap:32,speed:1,stopOnHover:!1},m=class{element;options;container;hover;constructor(n,e={}){this.element=n,this.options=b(e),this.container=w(this),v(this),this.hover=!1,this.initialise()}initialise(){this.element.style.overflowX="hidden",this.element.style.display="flex";let n=o=>{let i=o.offsetWidth,c=window.innerWidth*2,d=Math.ceil(Math.max(0,Math.log2(c/i)));this.debug(`Need to double ${d} time${W(d)} to reach required container width.`),d>0?this.debug("About to begin doubling container size."):this.debug("No need to double container size, it's wide enough."),this.debug(`
                Window inner width: ${window.innerWidth}
                Container offset width: ${o.offsetWidth}
            `);let r=0;for(let u=0;u<d;u++){A(o);let f=o.offsetWidth;if(f<=r)throw new Error("Something went wrong while doubling container elements; the container either stayed the same width or it shrunk somehow.");r=f}};if(n(this.container),window.addEventListener("resize",()=>n(this.container)),this.options.direction==="right"){let o=this.container.offsetWidth/2;this.container.style.marginLeft=`-${o}px`}this.options.stopOnHover&&(this.container.addEventListener("mouseover",()=>{this.hover=!0,this.container.style.willChange="auto"}),this.container.addEventListener("mouseout",()=>{this.hover=!1,this.container.style.willChange="transform"}));let e=0,s,l=p(this),h=l.offsetWidth;function a(o,i){if(i.hover){s=void 0,setTimeout(()=>{requestAnimationFrame(r=>a(r,i))},100);return}let c=y(o,s);s=o;let d=C(i.options.speed,c);if(e+=d,e>=h){e=0;let r=l.cloneNode(!0);i.options.direction==="left"&&i.container.appendChild(r),i.options.direction==="right"&&i.container.prepend(r),i.container.removeChild(l),l=p(i),h=l.offsetWidth}i.options.direction==="left"&&(i.container.style.transform=`translate3d(-${e}px, 0, 0)`),i.options.direction==="right"&&(i.container.style.transform=`translate3d(${e}px, 0, 0)`),requestAnimationFrame(r=>a(r,i))}requestAnimationFrame(o=>a(o,this))}debug(n){if(this.options.debug){let e=n.replace(/\n\s+/g,`
`).trim();console.info(e)}}};function b(t){return{...g,...t}}function w(t){let n=t.element,e=document.createElement("div");for(;n.firstChild;)e.appendChild(n.firstChild);switch(n.appendChild(e),e.style.display="flex",e.style.willChange="transform",t.options.align){case"top":e.style.alignItems="flex-start";break;case"middle":e.style.alignItems="center";break;case"bottom":e.style.alignItems="flex-end";break}return e}function v(t){let n=t.container.children,e=[];for(let s of n)e.push(E(s,t.options));return e}function C(t,n){return t*.05*n}function y(t,n){return t-(n??t)}function A(t){let n=t.children.length;for(let e=0;e<n;e++){let s=t.children[e];if(s===void 0)throw new Error(`A child element within the container was undefined at index ${e}.`);t.appendChild(s.cloneNode(!0))}}function x(t){let n=document.createElement("div");return t.parentNode?.insertBefore(n,t),n.appendChild(t),n}function E(t,n){let e=x(t);return e.style.minWidth="max-content",e.style.paddingRight=`${n.gap}px`,e}function O(t){let n=t.options.direction;switch(n){case"left":return 0;case"right":return t.container.children.length-1;default:throw new Error(`Invalid direction in options "${n}".`)}}function p(t){let n=O(t),e=t.container.children[n];if(e===void 0)throw new Error(`Expected to find a slide to remove at index ${n}, however none was found.`);return e}function W(t){return t===1?"":"s"}export{m as AutoCarousel};
